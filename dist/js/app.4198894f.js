(function(t){function e(e){for(var a,o,s=e[0],c=e[1],l=e[2],u=0,m=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],a=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=r[0]))}return t}var a={},n={app:0},i=[];function o(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"4a9d":function(t,e,r){"use strict";r("80cf")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-card",{attrs:{color:"grey lighten-4",flat:"",height:"48px",tile:""}},[r("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",{attrs:{dense:""}},[r("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[t._l(t.links,(function(e,a){return r("v-list-item",{key:a,attrs:{to:e.url}},[r("v-list-item-icon",[r("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1)})),t.isUserLoggedIn?r("v-list-item",{on:{click:t.onLogout}},[r("v-list-item-icon",[r("v-icon",[t._v("mdi-logout")])],1),r("v-list-item-content",[r("v-list-item-title",[t._v("Logout")])],1)],1):t._e()],2)],1)],1),r("v-toolbar",{attrs:{dense:"",dark:"",color:"primary"}},[r("v-app-bar-nav-icon",{staticClass:"hidden-md-and-up",on:{click:function(e){t.drawer=!t.drawer}}}),r("v-toolbar-title",[r("router-link",{attrs:{to:"/",custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.navigate;return[r("span",{staticClass:"pointer",attrs:{role:"link"},on:{click:a,keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:a(e)}}},[t._v("Ad Application")])]}}])})],1),r("v-spacer"),r("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t._l(t.links,(function(e,a){return r("v-btn",{key:a,attrs:{text:"",to:e.url}},[r("v-icon",{attrs:{dark:"",left:""}},[t._v(t._s(e.icon))]),t._v(" "+t._s(e.text)+" ")],1)})),t.isUserLoggedIn?r("v-btn",{attrs:{text:""},on:{click:t.onLogout}},[r("v-icon",{attrs:{dark:"",left:""}},[t._v("mdi-logout")]),t._v(" Logout ")],1):t._e()],2)],1)],1),r("v-main",[r("router-view")],1),t.error?r("div",[r("v-snackbar",{attrs:{"multi-line":!0,timeout:-1,color:"error",dark:""},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[r("v-btn",t._b({attrs:{dark:"",text:""},on:{click:t.closeError}},"v-btn",a,!1),[t._v(" Close ")])]}}],null,!1,154719637),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.error)+" ")])],1):t._e()],1)},i=[],o=(r("b0c0"),{data:function(){return{snackbar:!0,drawer:!1,selectedItem:null}},computed:{error:function(){return this.$store.getters.error},isUserLoggedIn:function(){return this.$store.getters.isLoggedIn},links:function(){return this.$store.getters.isLoggedIn?[{text:"Orders",icon:"mdi-bookmark-outline",url:"/orders"},{text:"New ad",icon:"mdi-file-plus",url:"/new"},{text:"My ads",icon:"mdi-format-list-bulleted",url:"/list"}]:[{text:"Login",icon:"mdi-lock",url:"/login"},{text:"Registration",icon:"mdi-face",url:"/registration"}]}},methods:{closeError:function(){this.$store.dispatch("clearError")},onLogout:function(){this.$store.dispatch("onUserLogout"),"home"!==this.$route.name&&this.$router.push("/")}}}),s=o,c=(r("4a9d"),r("2877")),l=r("6544"),d=r.n(l),u=r("7496"),m=r("5bc1"),v=r("8336"),p=r("b0af"),f=r("132d"),h=r("8860"),g=r("da13"),b=r("5d23"),w=r("1baa"),x=r("34c3"),C=r("f6c4"),V=r("f774"),k=r("2db4"),y=r("2fa4"),_=r("71d9"),L=r("2a7f"),O=Object(c["a"])(s,n,i,!1,null,"e9795cbe",null),E=O.exports;d()(O,{VApp:u["a"],VAppBarNavIcon:m["a"],VBtn:v["a"],VCard:p["a"],VIcon:f["a"],VList:h["a"],VListItem:g["a"],VListItemContent:b["a"],VListItemGroup:w["a"],VListItemIcon:x["a"],VListItemTitle:b["c"],VMain:C["a"],VNavigationDrawer:V["a"],VSnackbar:k["a"],VSpacer:y["a"],VToolbar:_["a"],VToolbarItems:L["a"],VToolbarTitle:L["b"]});var I=r("2f62"),A=r("5530"),$=r("1da1"),P=r("d4ec"),S=(r("96cf"),r("a4d3"),r("e01a"),r("159b"),r("b64b"),r("4de4"),r("b47a")),T=r.n(S),j=function t(e,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Object(P["a"])(this,t),this.title=e,this.description=r,this.ownerId=a,this.src=n,this.promo=i,this.id=o},R={state:{ads:[]},mutations:{createAd:function(t,e){t.ads.push(e)},loadAds:function(t,e){t.ads=e}},actions:{updateAd:function(t,e){return Object($["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,a("clearError"),a("setLoading",!0),r.prev=3,r.next=6,T.a.database().ref("ads").child(e.id).update({title:e.title,description:e.description});case 6:a("setLoading",!1),r.next=14;break;case 9:throw r.prev=9,r.t0=r["catch"](3),a("setLoading",!1),a("setError",r.t0.message),r.t0;case 14:case"end":return r.stop()}}),r,null,[[3,9]])})))()},createAd:function(t,e){return Object($["a"])(regeneratorRuntime.mark((function r(){var a,n,i,o,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,n=t.getters,a("clearError"),a("setLoading",!0),i=e.image,r.prev=4,o=new j(e.title,e.description,n.currentUser.uid,"",e.promo,e.id),r.next=8,T.a.database().ref("ads").push(o);case 8:return s=r.sent,r.next=11,T.a.storage().ref("ads/".concat(i.name)).put(i);case 11:return r.next=13,T.a.storage().ref("ads/".concat(i.name)).getDownloadURL();case 13:return c=r.sent,r.next=16,T.a.database().ref("ads").child(s.key).update({src:c});case 16:a("createAd",Object(A["a"])(Object(A["a"])({},o),{},{id:s.key,src:c})),a("setLoading",!1),r.next=25;break;case 20:throw r.prev=20,r.t0=r["catch"](4),a("setError",r.t0.message),a("setLoading",!1),r.t0;case 25:case"end":return r.stop()}}),r,null,[[4,20]])})))()},fetchAds:function(t){return Object($["a"])(regeneratorRuntime.mark((function e(){var r,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,r("clearError"),r("setLoading",!0),a=[],e.prev=4,e.next=7,T.a.database().ref("ads").once("value");case 7:n=e.sent,i=n.val(),i&&(Object.keys(i).forEach((function(t){var e=i[t];a.push(new j(e.title,e.description,e.ownerId,e.src,e.promo,t))})),r("loadAds",a)),r("setLoading",!1),e.next=18;break;case 13:throw e.prev=13,e.t0=e["catch"](4),r("setLoading",!1),r("setError",e.t0.message),e.t0;case 18:case"end":return e.stop()}}),e,null,[[4,13]])})))()}},getters:{ads:function(t){return t.ads},promoAds:function(t){return t.ads.filter((function(t){return t.promo}))},myAds:function(t){return t.ads.filter((function(t){return t.ownerId===T.a.auth().currentUser.uid}))}}},U=function t(e){Object(P["a"])(this,t),this.id=e},D={state:{users:[],isLogged:!1,currentUser:null},mutations:{registerUser:function(t,e){t.users.push(e)},onSuccessfulLogin:function(t,e){t.isLogged=!0,t.currentUser=e},onLogout:function(t){t.isLogged=!1,T.a.auth().signOut().then((function(){localStorage.setItem("currentUserId",null),t.currentUser=null}))}},actions:{registerUser:function(t,e){return Object($["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,a("clearError"),a("setLoading",!0),r.prev=3,r.next=6,T.a.auth().createUserWithEmailAndPassword(e.email,e.password);case 6:n=r.sent,a("registerUser",new U(n.uid)),a("setLoading",!1),r.next=16;break;case 11:throw r.prev=11,r.t0=r["catch"](3),a("setLoading",!1),a("setError",r.t0.message),r.t0;case 16:case"end":return r.stop()}}),r,null,[[3,11]])})))()},loginUser:function(t,e){return Object($["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,n=e.email,i=e.password,a("clearError"),a("setLoading",!0),r.prev=4,r.next=7,T.a.auth().signInWithEmailAndPassword(n,i);case 7:a("setLoading",!1),a("onSuccessfulLogin",T.a.auth().currentUser),localStorage.setItem("currentUserId",T.a.auth().currentUser.uid),r.next=17;break;case 12:throw r.prev=12,r.t0=r["catch"](4),a("setLoading",!1),a("setError",r.t0.message),r.t0;case 17:case"end":return r.stop()}}),r,null,[[4,12]])})))()},onUserLogout:function(t){var e=t.commit;e("onLogout")}},getters:{users:function(t){return t.users},isLoggedIn:function(t){return t.isLogged},currentUser:function(t){return t.currentUser}}},q=(r("99af"),function t(e,r,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(P["a"])(this,t),this.name=e,this.phone=r,this.adId=a,this.done=n,this.id=i}),F={state:{orders:[]},mutations:{createOrder:function(t,e){t.orders.push(e)},loadOrders:function(t,e){t.orders=e}},actions:{createOrder:function(t,e){return Object($["a"])(regeneratorRuntime.mark((function r(){var a,n,i,o,s,c,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,n=e.name,i=e.phone,o=e.adId,s=e.done,c=void 0!==s&&s,l=e.ownerId,a("clearError"),r.prev=3,r.next=6,T.a.database().ref("users/".concat(l)).push({name:n,phone:i,adId:o,done:c});case 6:r.next=12;break;case 8:throw r.prev=8,r.t0=r["catch"](3),a("setError",r.t0.message),r.t0;case 12:case"end":return r.stop()}}),r,null,[[3,8]])})))()},fetchOrders:function(t,e){return Object($["a"])(regeneratorRuntime.mark((function r(){var a,n,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,a("clearError"),a("setLoading",!0),n=[],r.prev=4,r.next=7,T.a.database().ref("users/".concat(e)).once("value");case 7:i=r.sent,o=i.val(),o&&(Object.keys(o).forEach((function(t){var e=o[t];n.push(new q(e.name,e.phone,e.adId,e.done,t))})),a("loadOrders",n)),a("setLoading",!1),r.next=18;break;case 13:throw r.prev=13,r.t0=r["catch"](4),a("setLoading",!1),a("setError",r.t0.message),r.t0;case 18:case"end":return r.stop()}}),r,null,[[4,13]])})))()},markOrderDone:function(t,e){return Object($["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,n=t.getters,r.prev=1,a("clearError"),r.next=5,T.a.database().ref("users/".concat(n.currentUser.uid)).child(e).update({done:!0});case 5:r.next=11;break;case 7:throw r.prev=7,r.t0=r["catch"](1),a("setError",r.t0.message),r.t0;case 11:case"end":return r.stop()}}),r,null,[[1,7]])})))()}},getters:{doneOrders:function(t){return t.orders.filter((function(t){return t.done}))},notDoneOrders:function(t){return t.orders.filter((function(t){return!t.done}))},orders:function(t,e){return e.notDoneOrders.concat(e.doneOrders)}}},M={state:{loading:!1,error:null},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error=e},clearError:function(t){t.error=null}},actions:{setLoading:function(t,e){var r=t.commit;r("setLoading",e)},setError:function(t,e){var r=t.commit;r("setError",e)},clearError:function(t){var e=t.commit;e("clearError")}},getters:{loading:function(t){return t.loading},error:function(t){return t.error}}};a["a"].use(I["a"]);var B=new I["a"].Store({modules:{ads:R,users:D,common:M,orders:F}}),z=r("f309");a["a"].use(z["a"]);var N=new z["a"]({theme:{themes:{light:{}}}}),J=r("8c4f"),Y=function(t,e,r){D.getters.isLoggedIn?r():r("/login?loginError=true")},G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loading?r("div",[r("v-container",[r("v-row",[r("v-col",{staticClass:"text-center pt-15"},[r("v-progress-circular",{attrs:{size:100,width:7,color:"purple",indeterminate:""}})],1)],1)],1)],1):r("div",[r("v-container",{attrs:{fluid:""}},[r("v-carousel",t._l(t.promoAds,(function(e){return r("v-carousel-item",{key:e.id,attrs:{src:e.src,"reverse-transition":"fade-transition",transition:"fade-transition"}},[r("div",{staticClass:"ad-link"},[r("v-btn",{staticClass:"error",attrs:{to:"/ad/"+e.id}},[t._v(t._s(e.title))])],1)])})),1)],1),r("v-container",[r("v-row",t._l(t.ads,(function(e){return r("v-col",{key:e.id,attrs:{xs:"12",sm:"6",md:"4",lg:"3"}},[r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400"}},[r("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:e.src}},[r("v-card-title",[t._v(t._s(e.title))])],1),r("v-card-subtitle",{staticClass:"pb-0"},[t._v(" ID "+t._s(e.id)+" ")]),r("v-card-text",{staticClass:"text--primary"},[r("div",[t._v(t._s(e.description))])]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"orange",text:"",to:"/ad/"+e.id}},[t._v(" Open ")]),r("buy-modal",{attrs:{ad:e}})],1)],1),r("br")],1)})),1)],1)],1)},W=[],K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{width:"400px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[r("v-btn",t._g(t._b({attrs:{color:"primary",elevation:"12"}},"v-btn",n,!1),a),[t._v(" Buy ")])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v("Do you really want to buy it?")])]),r("v-card-text",[r("v-form",{ref:"orderForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Name*",rules:[function(t){return!!t||"Name is required"}],required:""},model:{value:t.customerName,callback:function(e){t.customerName=e},expression:"customerName"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{label:"Phone*",rows:"1",rules:[function(t){return!!t||"Phone is required"}],required:""},model:{value:t.customerPhone,callback:function(e){t.customerPhone=e},expression:"customerPhone"}})],1)],1)],1),r("small",[t._v("*indicates required field")])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.localLoading},on:{click:t.onCancelModal}},[t._v(" Close ")]),r("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.localLoading,loading:t.localLoading},on:{click:t.onOrder}},[t._v(" Order ")])],1)],1)],1)},Q=[],H=(r("d3b7"),{props:["ad"],data:function(){return{valid:!1,modal:!1,customerName:"",customerPhone:"",localLoading:!1}},methods:{onCancelModal:function(){this.$refs.orderForm.reset(),this.$refs.orderForm.resetValidation(),this.modal=!1},onOrder:function(){var t=this;this.$refs.orderForm.validate()&&(this.localLoading=!0,this.$store.dispatch("createOrder",{name:this.customerName,phone:this.customerPhone,adId:this.ad.id,ownerId:this.ad.ownerId}).finally((function(){t.$refs.orderForm.reset(),t.$refs.orderForm.resetValidation(),t.localLoading=!1,t.modal=!1})))}}}),X=H,Z=r("99d9"),tt=r("62ad"),et=r("a523"),rt=r("169a"),at=r("4bd4"),nt=r("0fd9"),it=r("8654"),ot=r("a844"),st=Object(c["a"])(X,K,Q,!1,null,"36e7b7c2",null),ct=st.exports;d()(st,{VBtn:v["a"],VCard:p["a"],VCardActions:Z["a"],VCardText:Z["c"],VCardTitle:Z["d"],VCol:tt["a"],VContainer:et["a"],VDialog:rt["a"],VForm:at["a"],VRow:nt["a"],VSpacer:y["a"],VTextField:it["a"],VTextarea:ot["a"]});var lt={components:{BuyModal:ct},computed:{promoAds:function(){return this.$store.getters.promoAds},ads:function(){return this.$store.getters.ads},loading:function(){return this.$store.getters.loading}}},dt=lt,ut=(r("c2a5"),r("5e66")),mt=r("3e35"),vt=r("adda"),pt=r("490a"),ft=Object(c["a"])(dt,G,W,!1,null,"9170b83a",null),ht=ft.exports;d()(ft,{VBtn:v["a"],VCard:p["a"],VCardActions:Z["a"],VCardSubtitle:Z["b"],VCardText:Z["c"],VCardTitle:Z["d"],VCarousel:ut["a"],VCarouselItem:mt["a"],VCol:tt["a"],VContainer:et["a"],VImg:vt["a"],VProgressCircular:pt["a"],VRow:nt["a"],VSpacer:y["a"]});var gt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-row",{staticClass:"mt-5"},[r("v-col",{attrs:{xs:"12",sm:"6","offset-sm":"3"}},[t.loading?r("div",[r("v-container",[r("v-row",[r("v-col",{staticClass:"text-center pt-15"},[r("v-progress-circular",{attrs:{size:100,width:7,color:"purple",indeterminate:""}})],1)],1)],1)],1):r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400"}},[r("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:t.currentAd.src}}),r("v-card-title",{staticClass:"pb-0"},[t._v(" "+t._s(t.currentAd.title)+" ")]),r("v-card-text",{staticClass:"text--primary"},[r("div",[t._v(t._s(t.currentAd.description))])]),r("v-card-actions",[r("v-spacer"),t.isOwner?r("EditModal",{attrs:{ad:t.currentAd}}):t._e(),r("buy-modal",{attrs:{ad:t.currentAd}})],1)],1)],1)],1)],1)},bt=[],wt=(r("7db0"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{width:"400px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"mr-4",attrs:{color:"orange"}},"v-btn",n,!1),a),[t._v(" Edit ")])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v("Edit Ad")])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Title*",required:""},model:{value:t.editedTitle,callback:function(e){t.editedTitle=e},expression:"editedTitle"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{label:"Description*",rows:"1",required:""},model:{value:t.editedDescription,callback:function(e){t.editedDescription=e},expression:"editedDescription"}})],1)],1)],1),r("small",[t._v("*indicates required field")])],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.onCancelModal}},[t._v(" Close ")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.onSave}},[t._v(" Save ")])],1)],1)],1)}),xt=[],Ct={props:["ad"],data:function(){return{modal:!1,editedTitle:this.ad.title,editedDescription:this.ad.description}},methods:{onCancelModal:function(){this.editedTitle=this.ad.title,this.editedDescription=this.ad.description,this.modal=!1},onSave:function(){""!==this.editedDescription&&""!==this.editedTitle&&(this.$store.dispatch("updateAd",{title:this.editedTitle,description:this.editedDescription,id:this.ad.id}),this.ad.title=this.editedTitle,this.ad.description=this.editedDescription,this.modal=!1)}}},Vt=Ct,kt=Object(c["a"])(Vt,wt,xt,!1,null,"15af310f",null),yt=kt.exports;d()(kt,{VBtn:v["a"],VCard:p["a"],VCardActions:Z["a"],VCardText:Z["c"],VCardTitle:Z["d"],VCol:tt["a"],VContainer:et["a"],VDialog:rt["a"],VRow:nt["a"],VSpacer:y["a"],VTextField:it["a"],VTextarea:ot["a"]});var _t={components:{BuyModal:ct,EditModal:yt},props:["id"],computed:{currentAd:function(){var t=this;return this.$store.getters.ads.find((function(e){return e.id===t.$props.id}))},loading:function(){return this.$store.getters.loading},isOwner:function(){return localStorage.getItem("currentUserId")===this.currentAd.ownerId}}},Lt=_t,Ot=Object(c["a"])(Lt,gt,bt,!1,null,"03a10378",null),Et=Ot.exports;d()(Ot,{VCard:p["a"],VCardActions:Z["a"],VCardText:Z["c"],VCardTitle:Z["d"],VCol:tt["a"],VContainer:et["a"],VImg:vt["a"],VProgressCircular:pt["a"],VRow:nt["a"],VSpacer:y["a"]});var It=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-col",{attrs:{xs:"12",sm:"6","offset-sm":"3"}},[r("h1",{staticClass:"display-1 text--secondary my-3"},[t._v("My Ads")]),t.loading||0===t.myAds.length?t.loading||0!==t.myAds.length?r("div",[r("v-container",[r("v-row",[r("v-col",{staticClass:"text-center pt-15"},[r("v-progress-circular",{attrs:{size:100,width:7,color:"purple",indeterminate:""}})],1)],1)],1)],1):r("div",[r("p",{staticClass:"text--secondary text-center mt-5"},[t._v("You have not any ads!")])]):r("v-container",[r("v-row",t._l(t.myAds,(function(e){return r("v-col",{key:e.id,attrs:{cols:"12"}},[r("v-card",[r("div",{staticClass:"d-flex flex-no-wrap justify-space-around"},[r("v-avatar",{staticClass:"ma-3",attrs:{size:"150",tile:""}},[r("v-img",{attrs:{src:e.src}})],1),r("div",[r("v-card-title",{staticClass:"headline",domProps:{textContent:t._s(e.title)}}),r("v-card-subtitle",{staticClass:"mb-5",domProps:{textContent:t._s(e.description)}}),r("v-card-actions",{},[r("v-btn",{staticClass:"primary elevation-2 mx-auto",attrs:{dark:"",small:"",width:"80px",to:"/ad/"+e.id}},[t._v(" Open ")])],1)],1)],1)])],1)})),1)],1)],1)],1)],1)},At=[],$t={computed:{myAds:function(){return this.$store.getters.myAds},loading:function(){return this.$store.getters.loading}}},Pt=$t,St=r("8212"),Tt=r("a722"),jt=Object(c["a"])(Pt,It,At,!1,null,"246f0951",null),Rt=jt.exports;d()(jt,{VAvatar:St["a"],VBtn:v["a"],VCard:p["a"],VCardActions:Z["a"],VCardSubtitle:Z["b"],VCardTitle:Z["d"],VCol:tt["a"],VContainer:et["a"],VImg:vt["a"],VLayout:Tt["a"],VProgressCircular:pt["a"],VRow:nt["a"]});var Ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-card",{staticClass:"mx-auto mt-5 elevation-12 col-sm-6"},[r("v-card-title",{staticClass:"pa-3 mb-5 info white--text"},[r("h1",{staticClass:"display-1"},[t._v("Create New Ad")])]),r("v-card-text",{staticClass:"mb-3"},[r("v-form",{ref:"newAdForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{label:"Ad Title",rules:[function(t){return!!t||"Title is required"}],required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("v-textarea",{attrs:{label:"Ad Description",rows:"2",rules:[function(t){return!!t||"Description is required"}],required:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),r("v-file-input",{attrs:{rules:[function(t){return!!t||"Image is required"}],accept:"image/png, image/jpeg, image/bmp",placeholder:"Pick an image","prepend-icon":"mdi-camera",label:"Ad image","show-size":""},nativeOn:{change:function(e){return t.onFileChange(e)}}}),r("v-row",{staticClass:"my-3",attrs:{justify:"center"}},[this.valid?r("v-img",{attrs:{src:t.imageSrc,"max-height":"200"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,4034393411)}):t._e()],1),r("v-switch",{attrs:{label:"Add to promo"},model:{value:t.switch1,callback:function(e){t.switch1=e},expression:"switch1"}})],1)],1),r("v-divider"),r("v-card-actions",[r("v-btn",{staticClass:"v-btn--block",attrs:{color:"info",disabled:!t.valid&&!t.image||t.loading},on:{click:t.onCreate}},[t._v(" Create ")])],1)],1)],1)},Dt=[],qt={data:function(){return{valid:!1,title:"",description:"",switch1:!0,imageSrc:"",image:null}},computed:{loading:function(){return this.$store.getters.loading}},methods:{onFileChange:function(t){var e=this;this.image=null;var r=t.target.files[0],a=new FileReader;a.onload=function(){e.imageSrc=a.result},a.readAsDataURL(r),this.image=r},onCreate:function(){if(this.$refs.newAdForm.validate()&&this.image){var t={title:this.title,description:this.description,promo:this.switch1,image:this.image};this.$store.dispatch("createAd",t),console.log(t),this.$router.push("list")}}}},Ft=qt,Mt=r("ce7e"),Bt=r("23a7"),zt=r("b73d"),Nt=Object(c["a"])(Ft,Ut,Dt,!1,null,"79991d6c",null),Jt=Nt.exports;d()(Nt,{VBtn:v["a"],VCard:p["a"],VCardActions:Z["a"],VCardText:Z["c"],VCardTitle:Z["d"],VContainer:et["a"],VDivider:Mt["a"],VFileInput:Bt["a"],VForm:at["a"],VImg:vt["a"],VProgressCircular:pt["a"],VRow:nt["a"],VSwitch:zt["a"],VTextField:it["a"],VTextarea:ot["a"]});var Yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-card",{staticClass:"mx-auto mt-5 elevation-12 col-sm-4"},[r("v-card-title",{staticClass:"pa-3 mb-5 info white--text"},[r("h1",{staticClass:"display-1"},[t._v("Login")])]),r("v-card-text",{staticClass:"mb-3"},[r("v-form",{ref:"loginForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{label:"Email",type:"email","prepend-icon":"mdi-at",rules:t.emailRules,"validate-on-blur":"",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),r("v-text-field",{attrs:{type:t.showPassword?"text":"password",label:"Password","prepend-icon":"mdi-lock","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",rules:[function(t){return!!t||"Password is required"}],required:""},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),r("v-divider"),r("v-card-actions",[r("v-btn",{staticClass:"v-btn--block",attrs:{color:"info",loading:t.loading,disabled:!t.valid||t.loading},on:{click:t.onLogin}},[t._v(" Submit ")])],1)],1)],1)},Gt=[],Wt=(r("caad"),r("2532"),{data:function(){return{valid:!1,email:"",emailRules:[function(t){return!!t||"Email is required"},function(t){return 0!==t.indexOf("@")||"Email should have a username"},function(t){return t.includes("@")||"Email should include an @ symbol"},function(t){return t.indexOf(".")-t.indexOf("@")>1||"Email should contain a valid domain"},function(t){return t.indexOf(".")<=t.length-3||"Email should contain a valid domain extension"}],password:"",showPassword:!1}},computed:{loading:function(){return this.$store.getters.loading}},methods:{onLogin:function(){var t=this;if(this.$refs.loginForm.validate()){var e={email:this.email,password:this.password};this.$store.dispatch("loginUser",e).then((function(){t.$router.push("/"),console.log("login successful")})).catch((function(){}))}}},created:function(){this.$route.query["loginError"]&&this.$store.dispatch("setError","You should log in to access this page")}}),Kt=Wt,Qt=Object(c["a"])(Kt,Yt,Gt,!1,null,"75cc470b",null),Ht=Qt.exports;d()(Qt,{VBtn:v["a"],VCard:p["a"],VCardActions:Z["a"],VCardText:Z["c"],VCardTitle:Z["d"],VContainer:et["a"],VDivider:Mt["a"],VForm:at["a"],VTextField:it["a"]});var Xt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-card",{staticClass:"mx-auto mt-5 elevation-12 col-sm-6"},[r("v-card-title",{staticClass:"pa-3 mb-5 info white--text"},[r("h1",{staticClass:"display-1"},[t._v("SignUp")])]),r("v-card-text",{staticClass:"mb-3"},[r("v-form",{ref:"signUpForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{label:"Username","prepend-icon":"mdi-account-circle",rules:t.usernameRules,"validate-on-blur":"",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),r("v-text-field",{attrs:{label:"Email",type:"email","prepend-icon":"mdi-at",rules:t.emailRules,"validate-on-blur":"",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),r("v-text-field",{attrs:{type:t.showPassword?"text":"password",label:"Password","prepend-icon":"mdi-lock","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",rules:t.passwordRules,"validate-on-blur":"",counter:"",required:""},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("v-text-field",{attrs:{type:t.showPasswordConfirm?"text":"password",label:"Password confirmation","prepend-icon":"mdi-lock-check","append-icon":t.showPasswordConfirm?"mdi-eye":"mdi-eye-off",rules:t.passwordConfirmRules,"validate-on-blur":"",required:""},on:{"click:append":function(e){t.showPasswordConfirm=!t.showPasswordConfirm}},model:{value:t.passwordConfirm,callback:function(e){t.passwordConfirm=e},expression:"passwordConfirm"}})],1)],1),r("v-divider"),r("v-card-actions",[r("v-btn",{staticClass:"v-btn--block",attrs:{color:"info",loading:t.loading,disabled:!t.valid||t.loading},on:{click:t.onSubmit}},[t._v(" Submit ")])],1)],1)],1)},Zt=[],te={data:function(){var t=this;return{valid:!1,username:"",usernameRules:[function(t){return!!t||"Username is required"},function(t){return t.length>1||"Minimum length is 2"}],email:"",emailRules:[function(t){return!!t||"Email is required"},function(t){return 0!==t.indexOf("@")||"Email should have a username"},function(t){return t.includes("@")||"Email should include an @ symbol"},function(t){return t.indexOf(".")-t.indexOf("@")>1||"Email should contain a valid domain"},function(t){return t.indexOf(".")<=t.length-3||"Email should contain a valid domain extension"}],password:"",showPassword:!1,passwordRules:[function(t){return!!t||"Password is required"},function(t){return t.length>7||"Password should contain at least 8 symbols"}],passwordConfirm:"",showPasswordConfirm:!1,passwordConfirmRules:[function(t){return!!t||"Password confirmation is required"},function(e){return e===t.password||"Should match the password above"}]}},computed:{loading:function(){return this.$store.getters.loading}},methods:{onSubmit:function(){var t=this;if(this.$refs.signUpForm.validate()){var e={name:this.username,email:this.email,password:this.password};this.$store.dispatch("registerUser",e).then((function(){t.$router.push("login"),console.log("registration successful")})).catch((function(){}))}}}},ee=te,re=Object(c["a"])(ee,Xt,Zt,!1,null,"4d31cab5",null),ae=re.exports;d()(re,{VBtn:v["a"],VCard:p["a"],VCardActions:Z["a"],VCardText:Z["c"],VCardTitle:Z["d"],VContainer:et["a"],VDivider:Mt["a"],VForm:at["a"],VTextField:it["a"]});var ne=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("h1",{staticClass:"display-1 text--secondary my-5"},[t._v("Orders")]),t.loading||0===t.orders.length?t.loading||0!==t.orders.length?r("div",[r("v-container",[r("v-row",[r("v-col",{staticClass:"text-center pt-15"},[r("v-progress-circular",{attrs:{size:100,width:7,color:"purple",indeterminate:""}})],1)],1)],1)],1):r("div",[r("p",{staticClass:"text--secondary text-center mt-5"},[t._v("No orders yet!")])]):r("v-row",[r("v-col",{attrs:{xs:"12",sm:"6"}},[r("v-list",{attrs:{subheader:"","two-line":"",flat:""}},[r("v-list-item-group",{attrs:{multiple:""}},t._l(t.orders,(function(e){return r("v-list-item",{key:e.id,scopedSlots:t._u([{key:"default",fn:function(a){var n=a.active;return[r("v-list-item-action",[r("v-checkbox",{attrs:{"input-value":n,color:"primary"},on:{click:function(r){return t.markDone(e)}},model:{value:e.done,callback:function(r){t.$set(e,"done",r)},expression:"order.done"}})],1),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(e.name))]),r("v-list-item-subtitle",[t._v(t._s(e.phone))])],1),r("v-btn",{staticClass:"primary",attrs:{small:"",to:"/ad/"+e.adId}},[t._v("Open")])]}}],null,!0)})})),1)],1)],1)],1)],1)},ie=[],oe={data:function(){return{currentUserId:""}},computed:{orders:function(){return this.$store.getters.orders},loading:function(){return this.$store.getters.loading}},methods:{markDone:function(t){this.$store.dispatch("markOrderDone",t.id)}},created:function(){this.currentUserId=localStorage.getItem("currentUserId"),this.$store.dispatch("fetchOrders",this.currentUserId)}},se=oe,ce=r("ac7c"),le=r("1800"),de=Object(c["a"])(se,ne,ie,!1,null,"0e3accd4",null),ue=de.exports;d()(de,{VBtn:v["a"],VCheckbox:ce["a"],VCol:tt["a"],VContainer:et["a"],VList:h["a"],VListItem:g["a"],VListItemAction:le["a"],VListItemContent:b["a"],VListItemGroup:w["a"],VListItemSubtitle:b["b"],VListItemTitle:b["c"],VProgressCircular:pt["a"],VRow:nt["a"]}),a["a"].use(J["a"]);var me=new J["a"]({routes:[{path:"",name:"home",component:ht},{path:"/ad/:id",name:"ad",props:!0,component:Et,beforeEnter:Y},{path:"/list",name:"list",component:Rt,beforeEnter:Y},{path:"/new",name:"newAd",component:Jt,beforeEnter:Y},{path:"/login",name:"login",component:Ht},{path:"/registration",name:"reg",component:ae},{path:"/orders",name:"orders",component:ue,beforeEnter:Y}],mode:"history"});a["a"].config.productionTip=!1,S["initializeApp"]({apiKey:"AIzaSyAeisJYlc3f1QxO37asmq8tA69BDFunE2s",authDomain:"itc-ads-d6055.firebaseapp.com",databaseURL:"https://itc-ads-d6055-default-rtdb.europe-west1.firebasedatabase.app",projectId:"itc-ads-d6055",storageBucket:"itc-ads-d6055.appspot.com",messagingSenderId:"206254392371",appId:"1:206254392371:web:ceb87cb6562c6a3463cf46"}),S["auth"]().onAuthStateChanged((function(t){t&&B.commit("onSuccessfulLogin")})),B.dispatch("fetchAds"),new a["a"]({vuetify:N,router:me,store:B,firebase:S,buy:ct,render:function(t){return t(E)}}).$mount("#app")},"80cf":function(t,e,r){},"90a3":function(t,e,r){},c2a5:function(t,e,r){"use strict";r("90a3")}});
//# sourceMappingURL=app.4198894f.js.map